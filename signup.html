<!doctype html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Vision.AI | Sign Up</title>
    <link rel="icon" href="img/favicon.png">
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <!-- animate CSS -->
    <link rel="stylesheet" href="css/animate.css">
    <!-- flaticon CSS -->
    <link rel="stylesheet" href="css/flaticon.css">
    <!-- style CSS -->
    <link rel="stylesheet" href="css/style.css">
    <!--===============================================================================================-->	
	<link rel="icon" type="image/png" href="auth/images/icons/favicon.png"/>
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="auth/vendor/bootstrap/css/bootstrap.min.css">
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="auth/fonts/font-awesome-4.7.0/css/font-awesome.min.css">
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="auth/fonts/iconic/css/material-design-iconic-font.min.css">
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="auth/vendor/animate/animate.css">
<!--===============================================================================================-->	
	<link rel="stylesheet" type="text/css" href="auth/vendor/css-hamburgers/hamburgers.min.css">
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="auth/vendor/animsition/css/animsition.min.css">
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="auth/vendor/select2/select2.min.css">
<!--===============================================================================================-->	
	<link rel="stylesheet" type="text/css" href="auth/vendor/daterangepicker/daterangepicker.css">
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="auth/css/util.css">
	<link rel="stylesheet" type="text/css" href="auth/css/main.css">
<!--===============================================================================================-->
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@8"></script>
</head>

<body onload="load_checker()">
    <!--::header part start::-->
    <header class="main_menu home_menu">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-lg-12">
                    <nav class="navbar navbar-expand-lg navbar-light">
                        <a class="navbar-brand" href="index.html"> <img src="img/logo.png" alt="logo"> </a>
                        <div class="collapse navbar-collapse main-menu-item justify-content-center"
                            id="navbarSupportedContent">
                            <ul class="navbar-nav align-items-center">
                                <li class="nav-item active">
                                    <a class="nav-link" style="color: white;" href="index.html">.</a>
                                </li>
                            </ul>
                        </div>
                        <a class="btn_2 d-none d-lg-block" href="login.html">LOGIN</a>
                    </nav>
                </div>
            </div>
        </div>
    </header>
    <!-- Header part end-->

    <!-- signup part start-->
	<div class="limiter">
		<div class="container-login100">
			<div class="wrap-login100">
				<div class="login100-form validate-form">
					<span class="login100-form-title p-b-26">
						Welcome!
					</span>
					
					<div class="wrap-input100">
						<input class="input100" type="text" id="username">
						<span class="focus-input100" data-placeholder="Pick a username"></span>
					</div>
					
					<div class="wrap-input100">
						<input class="input100" type="text" id="first_name">
						<span class="focus-input100" data-placeholder="First Name"></span>
					</div>

					<div class="wrap-input100">
						<input class="input100" type="text" id="last_name">
						<span class="focus-input100" data-placeholder="Last Name"></span>
					</div>

					<div class="wrap-input100">
						<input class="input100" type="text" id="email">
						<span class="focus-input100" data-placeholder="Email"></span>
					</div>

					<div class="wrap-input100" data-validate="Enter password">
						<span class="btn-show-pass">
							<i class="zmdi zmdi-eye"></i>
						</span>
						<input class="input100" type="password" id="password">
						<span class="focus-input100" data-placeholder="Password"></span>
					</div>

					<div class="container-login100-form-btn">
						<div class="wrap-login100-form-btn">
							<div class="login100-form-bgbtn"></div>
							<button class="login100-form-btn" onClick="signup()">
								Sign Up
							</button>
						</div>
					</div>

					<div class="text-center p-t-115">
						<span class="txt1">
							Already have an account?
						</span>

						<a class="txt2" href="login.html">
							Login
						</a>
					</div>
				</div>
			</div>
		</div>
	</div>
	

	<div id="dropDownSelect1"></div>
	<!-- signup part end-->		

    <!-- footer part start-->
    <footer class="footer-area">
        <div class="footer section_padding">
            <div class="container">
                <div class="row justify-content-between">
                    <div class="col-xl-2 col-md-4 col-sm-6 single-footer-widget">
                        <a href="#" class="footer_logo"> <img src="img/logo.png" alt="#"> </a>
                        <p>Diabetic Retinopathy detection 
                        using Deep Learning. </p>
                    </div>
                    <div class="col-xl-2 col-sm-6 col-md-4 single-footer-widget">
                        <h4>Quick Links</h4>
                        <ul>
                            <li><a href="#">Home</a></li>
                            <li><a href="#"> Our Services</a></li>
                        </ul>
                    </div>
                    <div class="col-xl-2 col-sm-6 col-md-4 single-footer-widget">
                        <h4>Developed by</h4>
                        <ul>
                            <li><a href="#">Devendra Kushwah</a></li>
                            <li><a href="#">Arpit Motwani</a></li>
                            <li><a href="#">Sanjeevani Oswal</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <div class="copyright_part">
            <div class="container">
                <div class="row align-items-center">
                    <p class="footer-text m-0 col-lg-8 col-md-12"><!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
Copyright &copy;<script>document.write(new Date().getFullYear());</script> All rights reserved
 | Vision.AI</p>
                </div>
            </div>
        </div>
    </footer>
    <!-- footer part end-->

    <script type="text/javascript">

        function load_checker(){
            if (localStorage.getItem("auth_token")!==null) {
                Swal.fire({
                    title: 'Hold on!!!',
                    text: "Already logged in as "+localStorage.getItem("username"),
                    type: 'warning',
                    showCancelButton: true,
                    confirmButtonColor: '#3085d6',
                    cancelButtonColor: '#d33',
                    cancelButtonText:"Logout",
                    allowOutsideClick: false,
                    confirmButtonText: 'Continue as '+localStorage.getItem("username")
                }).then((result) => {
                    if (result.value) {
                        window.location="http://localhost:8000/api/vision/detect_dr";
                    }
                    else{
                        localStorage.clear();
                    }
                })
            }
        }

        function signup(){
            var username = document.getElementById("username").value;
            var password = document.getElementById("password").value;
            var email = document.getElementById("email").value;
            var first_name = document.getElementById("first_name").value;
            var last_name = document.getElementById("last_name").value;
            var request = new XMLHttpRequest();
            request.onreadystatechange = function() {
                if (request.readyState == 4){
                    var response = JSON.parse(this.responseText);
                    if("user" in response){
                        Swal.fire({
                              type: 'success',
                              title: 'Account created successfully',
                              text: '',
                              allowOutsideClick: false,
                              footer: 'Please Login to continue',
                              confirmButtonText : 'Login Now'
                            }).then((result) => {
                                localStorage.clear();
                                if (result.value) {
                                        window.location="login.html";
                                }})
                    }
                    else{
                            Swal.fire({
                              type: 'error',
                              title: 'Oops...',
                              text: 'Username already exists or something went wrong',
                              footer: 'Try again with a different username or fill all the details',
                              allowOutsideClick: false
                            })
                    }
                }
            };
            request.open("POST", "http://localhost:8000/api/accounts/signup", false);
            request.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
            request.send("username="+username+"&password="+password+"&email="+email+"&first_name="+first_name+"&last_name="+last_name);
        }

    </script>
</body>
</html>